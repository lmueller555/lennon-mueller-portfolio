<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lennon Mueller Portfolio - AI/ML</title>
    <style>
        html, body {
            height: 100%;
            margin: 0;
        }
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('Mueller Logo.png') no-repeat center center;
            background-size: cover;
            opacity: 0.5;
            z-index: -1;
        }
        h1.title {
            color: white;
            text-align: center;
            text-decoration: underline;
            font-size: 48px;
        }
        nav {
            text-align: center;
            margin-top: 10px;
            background: rgba(0,0,0,0.6);
            padding: 10px 0;
        }
        nav a {
            margin: 0 15px;
            color: white;
            text-decoration: none;
            border: 1px solid white;
            padding: 8px 15px;
            border-radius: 4px;
            background: rgba(0,0,0,0.6);
        }
        #mlContainer {
            background: rgba(0,0,0,0.6);
            color: white;
            padding: 20px;
            margin: 20px auto;
            width: 90%;
            max-width: 1000px;
            border-radius: 8px;
        }
        label { display:block; margin:5px 0; }
        input, select { width:200px; }
        #result { margin-top:20px; }
        canvas {
            width: 100%;
            max-width: 800px;
            margin: 20px auto;
            display: block;
        }
        #summary, #metrics {
            margin: 10px 0;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1 class="title">Lennon Mueller</h1>
    <nav>
        <a href="index.html">Home</a>
        <a href="app-development.html">App Development</a>
        <a href="ai-ml.html">AI/ML</a>
    </nav>
    <div id="mlContainer">
        <h2>Customer Churn Dashboard</h2>
        <p id="summary"></p>
        <p id="metrics"></p>
        <canvas id="topCombosChart"></canvas>
        <canvas id="lowCombosChart"></canvas>
    </div>
<script>
async function loadDashboard(){
    const res = await fetch('http://localhost:5000/dashboard');
    const data = await res.json();
    document.getElementById('summary').innerText =
        `Dataset: ${data.total_customers} customers, Churn Rate: ${(data.churn_rate*100).toFixed(1)}%`;
    const m = data.metrics;
    document.getElementById('metrics').innerText =
        `Model AUC: ${m.auc.toFixed(3)} | Precision: ${m.precision.toFixed(3)} | Recall: ${m.recall.toFixed(3)}`;

    const topCtx = document.getElementById('topCombosChart').getContext('2d');
    const topLabels = data.top_combos.map(c=>`${c.features[0]}=${c.values[0]}\n${c.features[1]}=${c.values[1]}`);
    const topRates = data.top_combos.map(c=>c.rate*100);
    new Chart(topCtx,{
        type:'bar',
        data:{
            labels:topLabels,
            datasets:[{label:'Churn %',data:topRates,backgroundColor:'red'}]
        },
        options:{
            scales:{
                y:{beginAtZero:true,max:100},
                x:{ticks:{maxRotation:0,minRotation:0,autoSkip:false}}
            }
        }
    });

    const lowCtx = document.getElementById('lowCombosChart').getContext('2d');
    const lowLabels = data.bottom_combos.map(c=>`${c.features[0]}=${c.values[0]}\n${c.features[1]}=${c.values[1]}`);
    const lowRates = data.bottom_combos.map(c=>c.rate*100);
    new Chart(lowCtx,{
        type:'bar',
        data:{
            labels:lowLabels,
            datasets:[{label:'Churn %',data:lowRates,backgroundColor:'green'}]
        },
        options:{
            scales:{
                y:{beginAtZero:true,max:100},
                x:{ticks:{maxRotation:0,minRotation:0,autoSkip:false}}
            }
        }
    });
}
loadDashboard();
</script>
</body>
</html>
